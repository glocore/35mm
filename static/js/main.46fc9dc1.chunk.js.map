{"version":3,"sources":["components/Header/Header.module.css","components/Thumbnail/Thumbnail.module.css","components/Thumbstrip/Thumbstrip.module.css","components/Header/index.js","assets/add_icon.svg","assets/remove_icon.svg","components/Thumbnail/index.js","components/Thumbstrip/index.js","services/storageService.js","services/tmdbService.js","App.js","serviceWorker.js","index.js","App.module.css"],"names":["module","exports","Header","backdropImages","settings","infinite","speed","slidesToShow","slidesToScroll","autoplay","autoplaySpeed","arrows","className","styles","container","map","image","index","key","slide","style","backgroundImage","overlay","_extends","Object","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref","svgRef","title","props","width","height","viewBox","ref","ForwardRef","forwardRef","Thumbnail","imageUrl","isFavourite","onClick","thumbnail","hoverlay","Thumbstrip","movies","onThumbnailClick","slider","movie","overview","readStore","JSON","parse","localStorage","getItem","writeStore","value","setItem","stringify","apiKey","process","fetchGenres","a","result","url","fetch","response","json","data","genres","console","error","fetchMoviesForGenre","genre","results","App","React","useState","loadingPage","setLoadingPage","setError","setGenres","setMovies","setBackdropImages","favouritesList","setFavouritesList","favouritesMap","setFavouritesMap","updateFavouritesList","getGenres","getMovies","genresList","moviesToCommit","backdropImagesToCommit","debounced","debounce","fetchMoviesPromiseList","id","then","moviesList","path","genreId","Math","floor","random","Promise","all","updateFavourites","updatedMovieList","findIndex","item","filter","useEffect","catch","name","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.46fc9dc1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Header_container__1VC87\",\"slide\":\"Header_slide__2LcKo\",\"overlay\":\"Header_overlay__4rto8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"thumbnail\":\"Thumbnail_thumbnail__1OHsK\",\"hoverlay\":\"Thumbnail_hoverlay__XnGT2\",\"title\":\"Thumbnail_title__2iqYK\",\"overview\":\"Thumbnail_overview__1D-eG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"Thumbstrip_slider__3xsTK\",\"slide\":\"Thumbstrip_slide__2p_VJ\"};","import React from \"react\";\nimport Slider from \"react-slick\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport styles from \"./Header.module.css\";\n\nconst Header = ({ backdropImages }) => {\n  const settings = {\n    infinite: true,\n    speed: 1000,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    autoplay: true,\n    autoplaySpeed: 5000,\n    arrows: false\n  };\n\n  return (\n    <div className={styles.container}>\n      <Slider {...settings}>\n        {backdropImages?.map((image, index) => (\n          <div key={index}>\n            <div className={styles.slide} style={{ backgroundImage: `url(${image})` }} />\n          </div>\n        ))}\n      </Slider>\n      <div className={styles.overlay}>\n        <h1>35<br/>MM</h1>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n});\n\nvar SvgAddIcon = function SvgAddIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAddIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/add_icon.22545845.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13H5v-2h14v2z\"\n});\n\nvar SvgRemoveIcon = function SvgRemoveIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRemoveIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/remove_icon.175db760.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport styles from \"./Thumbnail.module.css\";\nimport {ReactComponent as AddIcon } from \"assets/add_icon.svg\"\nimport {ReactComponent as RemoveIcon } from \"assets/remove_icon.svg\"\n\nconst Thumbnail = ({ imageUrl, title, isFavourite, onClick }) => {\n  return (\n    <div\n      className={styles.thumbnail}\n      style={{ backgroundImage: `url(${imageUrl})` }}\n      onClick={onClick}\n    >\n      <div className={styles[\"title\"]}>\n        <span>{title}</span>\n      </div>\n      <div className={styles.hoverlay}>\n        {isFavourite ? (\n          <>\n            <RemoveIcon/>\n            <span>Remove from favourites</span>\n          </>\n        ) : (\n          <>\n            <AddIcon/>\n            <span>Add to favourites</span>\n          </>\n        )}\n        \n      </div>\n    </div>\n  );\n};\n\nexport default Thumbnail;\n","import React from \"react\";\nimport Thumbnail from \"components/Thumbnail\";\nimport styles from \"./Thumbstrip.module.css\";\n\nconst Thumbstrip = ({ movies, onThumbnailClick }) => {\n  return (\n    <div className={styles.slider}>\n      {movies.map((movie, index) => (\n        <div key={index} className={styles.slide}>\n          <Thumbnail\n            imageUrl={movie.thumbnail}\n            title={movie.title}\n            overview={movie.overview}\n            isFavourite={movie.isFavourite}\n            onClick={() => onThumbnailClick(movie, index)}\n          />\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default Thumbstrip;","const readStore = (key) => {\n  return JSON.parse(localStorage.getItem(key));\n}\n\nconst writeStore = (key, value) => {\n  localStorage.setItem(key, JSON.stringify(value))\n}\n\nexport { readStore, writeStore }","const apiBaseUrl = \"https://api.themoviedb.org/3/\";\nconst imageBaseUrl = \"https://image.tmdb.org/t/p/\"\nconst apiKey = process.env.REACT_APP_TMDB_API_KEY\n\nconst buildThumbnailUrl = (path) => `${imageBaseUrl}w300${path}`\n\nconst buildBackdropUrl = (path) => `${imageBaseUrl}w780${path}`\n\nconst fetchGenres = async () => {\n  let result = null;\n\n  try {\n    const url = `${apiBaseUrl}genre/movie/list?api_key=${apiKey}&language=en-US`    \n    const response = await fetch(url);\n    const data = await response.json()\n    \n    result = data.genres\n  } catch (error) {\n    console.error(error);    \n  }\n\n  return result;\n}\n\nconst fetchMoviesForGenre = async (genre) => {\n  let result = null;\n\n  try {\n    const url = `${apiBaseUrl}discover/movie?api_key=${apiKey}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_genres=${genre}`\n    const response = await fetch(url);\n    const data = await response.json()\n    \n    result = data.results;\n  } catch (error) {\n    console.error(error);    \n  }\n\n  return result;\n}\n\nexport {\n  buildThumbnailUrl,\n  buildBackdropUrl,\n  fetchGenres,\n  fetchMoviesForGenre\n}","import React from \"react\";\nimport { debounce } from \"lodash-es\";\nimport Header from \"components/Header\";\nimport Thumbstrip from \"components/Thumbstrip\";\nimport { readStore, writeStore } from \"services/storageService\"\nimport styles from \"./App.module.css\";\nimport {\n  buildBackdropUrl,\n  buildThumbnailUrl,\n  fetchGenres,\n  fetchMoviesForGenre,\n} from \"services/tmdbService\";\n\nfunction App() {\n  const [loadingPage, setLoadingPage] = React.useState(true);\n  const [error, setError] = React.useState(null);\n  const [genres, setGenres] = React.useState(null);\n  const [movies, setMovies] = React.useState({});\n  const [backdropImages, setBackdropImages] = React.useState([]);\n  const [favouritesList, setFavouritesList] = React.useState(readStore(\"favouritesList\") || []);\n  const [favouritesMap, setFavouritesMap] = React.useState(readStore(\"favouritesMap\") || {});\n  \n  const updateFavouritesList = (data) => {\n    setFavouritesList(data)\n    writeStore(\"favouritesList\", data)\n  }\n\n  const updateFavouritesMap = (data) => {\n    setFavouritesMap(data)\n    writeStore(\"favouritesMap\", data)\n  }\n\n  const getGenres = async () => {\n    const data = await fetchGenres();\n    setGenres(data);\n    setLoadingPage(false);\n\n    return data;\n  };\n\n  const getMovies = async (genresList) => {\n    let moviesToCommit = {};\n    let backdropImagesToCommit = [];\n    const debounced = debounce(() => {\n      setMovies({\n        ...movies,\n        ...moviesToCommit,\n      });\n\n      setBackdropImages([...backdropImagesToCommit]);\n    }, 1000);\n\n    const fetchMoviesPromiseList = genresList.map((genre) => {\n      fetchMoviesForGenre(genre.id).then((moviesList) => {\n        moviesToCommit = {\n          ...moviesToCommit,\n          [genre.id]: moviesList.map((movie) => ({\n            thumbnail: buildThumbnailUrl(movie[\"backdrop_path\"]),\n            title: movie[\"title\"],\n            id: movie[\"id\"],\n            genreId: genre.id,\n            isFavourite: !!favouritesMap[movie[\"id\"]],\n          })),\n        };\n\n        backdropImagesToCommit = [\n          ...backdropImagesToCommit,\n          buildBackdropUrl(\n            moviesList[Math.floor(Math.random() * moviesList.length)][\n              \"backdrop_path\"\n            ]\n          ),\n        ];\n\n        debounced();\n      });\n    });\n\n    await Promise.all(fetchMoviesPromiseList);\n  };\n\n  const updateFavourites = (movie) => {\n    const { genreId, id } = movie;\n    const updatedMovieList = movies[genreId];\n    const index = updatedMovieList?.findIndex((item) => item.id === id);\n    const isFavourite = updatedMovieList?.[index].isFavourite;\n\n    if(index > -1) {\n      updatedMovieList[index].isFavourite = !isFavourite;\n  \n      setMovies({\n        ...movies,\n        [genreId]: updatedMovieList,\n      });\n    }\n\n\n    if (isFavourite) {\n      updateFavouritesList(favouritesList.filter((value) => value.id !== id));\n    } else {\n      updateFavouritesList([...favouritesList, movie]);\n    }\n\n    updateFavouritesMap({\n      ...favouritesMap,\n      [id]: !isFavourite,\n    });\n  };\n\n  React.useEffect(() => {\n    getGenres()\n      .then(getMovies)\n      .catch((error) => {\n        console.error(error);\n        setError(\"Something went wrong. Please try again.\");\n      });\n  }, []);\n\n  if (error) return <div>{error}</div>;\n\n  return (\n    <div>\n      {loadingPage ? (\n        <div className={styles[\"empty-page\"]}>Loading...</div>\n      ) : (\n        <>\n          <header>\n            <Header backdropImages={backdropImages} />\n          </header>\n          <div className={styles[\"thumbstrip-container\"]}>\n            <h2>Favourites</h2>\n            {favouritesList.length ? (\n              <Thumbstrip\n                movies={favouritesList}\n                onThumbnailClick={updateFavourites}\n              />\n            ) : (\n              <div className={styles[\"empty-thumbstrip\"]}>\n                <span>\n                  Nothing here. Click on a movie to add to favourites.\n                </span>\n              </div>\n            )}\n          </div>\n          {genres.map((genre, index) => (\n            <div key={index} className={styles[\"thumbstrip-container\"]}>\n              <h2>{genre.name}</h2>\n              {movies[genre.id] ? (\n                <Thumbstrip\n                  movies={movies[genre.id]}\n                  onThumbnailClick={updateFavourites}\n                />\n              ) : (\n                <div className={styles[\"empty-thumbstrip\"]}>\n                  <span>Loading...</span>\n                </div>\n              )}\n            </div>\n          ))}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"App_header__3ZZ1n\",\"thumbstrip-container\":\"App_thumbstrip-container__34Wfx\",\"empty-page\":\"App_empty-page__E5y3a\",\"empty-thumbstrip\":\"App_empty-thumbstrip__1Uosu\"};"],"sourceRoot":""}