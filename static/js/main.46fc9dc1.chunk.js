(this.webpackJsonp35mm=this.webpackJsonp35mm||[]).push([[0],{12:function(e,t,a){e.exports={container:"Header_container__1VC87",slide:"Header_slide__2LcKo",overlay:"Header_overlay__4rto8"}},13:function(e,t,a){e.exports={thumbnail:"Thumbnail_thumbnail__1OHsK",hoverlay:"Thumbnail_hoverlay__XnGT2",title:"Thumbnail_title__2iqYK",overview:"Thumbnail_overview__1D-eG"}},16:function(e,t,a){e.exports={slider:"Thumbstrip_slider__3xsTK",slide:"Thumbstrip_slide__2p_VJ"}},21:function(e,t,a){e.exports=a(45)},26:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),l=(a(26),a(3)),o=a(14),u=a(7),s=a(1),m=a.n(s),p=a(4),v=a(2),f=a(47),d=a(19),h=a.n(d),b=(a(43),a(44),a(12)),g=a.n(b),y=function(e){var t=e.backdropImages,a={infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:5e3,arrows:!1};return r.a.createElement("div",{className:g.a.container},r.a.createElement(h.a,a,null===t||void 0===t?void 0:t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:g.a.slide,style:{backgroundImage:"url(".concat(e,")")}}))}))),r.a.createElement("div",{className:g.a.overlay},r.a.createElement("h1",null,"35",r.a.createElement("br",null),"MM")))},E=a(13),_=a.n(E);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var j=r.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),k=function(e){var t=e.svgRef,a=e.title,n=w(e,["svgRef","title"]);return r.a.createElement("svg",O({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,j)},x=r.a.forwardRef((function(e,t){return r.a.createElement(k,O({svgRef:t},e))}));a.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var T=r.a.createElement("path",{d:"M19 13H5v-2h14v2z"}),I=function(e){var t=e.svgRef,a=e.title,n=N(e,["svgRef","title"]);return r.a.createElement("svg",S({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,T)},F=r.a.forwardRef((function(e,t){return r.a.createElement(I,S({svgRef:t},e))})),M=(a.p,function(e){var t=e.imageUrl,a=e.title,n=e.isFavourite,c=e.onClick;return r.a.createElement("div",{className:_.a.thumbnail,style:{backgroundImage:"url(".concat(t,")")},onClick:c},r.a.createElement("div",{className:_.a.title},r.a.createElement("span",null,a)),r.a.createElement("div",{className:_.a.hoverlay},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement("span",null,"Remove from favourites")):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement("span",null,"Add to favourites"))))}),R=a(16),C=a.n(R),P=function(e){var t=e.movies,a=e.onThumbnailClick;return r.a.createElement("div",{className:C.a.slider},t.map((function(e,t){return r.a.createElement("div",{key:t,className:C.a.slide},r.a.createElement(M,{imageUrl:e.thumbnail,title:e.title,overview:e.overview,isFavourite:e.isFavourite,onClick:function(){return a(e,t)}}))})))},H=function(e){return JSON.parse(localStorage.getItem(e))},A=function(e,t){localStorage.setItem(e,JSON.stringify(t))},J=a(5),L=a.n(J),U="9be5962f75cabd26c04eb4443674e0d2",B=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,a="".concat("https://api.themoviedb.org/3/","genre/movie/list?api_key=").concat(U,"&language=en-US"),e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,t=r.genres,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,n="".concat("https://api.themoviedb.org/3/","discover/movie?api_key=").concat(U,"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_genres=").concat(t),e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,a=c.results,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();var V=function(){var e=r.a.useState(!0),t=Object(v.a)(e,2),a=t[0],n=t[1],c=r.a.useState(null),i=Object(v.a)(c,2),s=i[0],d=i[1],h=r.a.useState(null),b=Object(v.a)(h,2),g=b[0],E=b[1],_=r.a.useState({}),O=Object(v.a)(_,2),w=O[0],j=O[1],k=r.a.useState([]),x=Object(v.a)(k,2),S=x[0],N=x[1],T=r.a.useState(H("favouritesList")||[]),I=Object(v.a)(T,2),F=I[0],M=I[1],R=r.a.useState(H("favouritesMap")||{}),C=Object(v.a)(R,2),J=C[0],U=C[1],V=function(e){M(e),A("favouritesList",e)},W=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return t=e.sent,E(t),n(!1),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=[],r=Object(f.a)((function(){j(Object(u.a)({},w,{},a)),N(Object(o.a)(n))}),1e3),c=t.map((function(e){K(e.id).then((function(t){var c;a=Object(u.a)({},a,Object(l.a)({},e.id,t.map((function(t){return{thumbnail:(a=t.backdrop_path,"".concat("https://image.tmdb.org/t/p/","w300").concat(a)),title:t.title,id:t.id,genreId:e.id,isFavourite:!!J[t.id]};var a})))),n=[].concat(Object(o.a)(n),[(c=t[Math.floor(Math.random()*t.length)].backdrop_path,"".concat("https://image.tmdb.org/t/p/","w780").concat(c))]),r()}))})),e.next=6,Promise.all(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t,a=e.genreId,n=e.id,r=w[a],c=null===r||void 0===r?void 0:r.findIndex((function(e){return e.id===n})),i=null===r||void 0===r?void 0:r[c].isFavourite;c>-1&&(r[c].isFavourite=!i,j(Object(u.a)({},w,Object(l.a)({},a,r)))),V(i?F.filter((function(e){return e.id!==n})):[].concat(Object(o.a)(F),[e])),t=Object(u.a)({},J,Object(l.a)({},n,!i)),U(t),A("favouritesMap",t)};return r.a.useEffect((function(){W().then(z).catch((function(e){console.error(e),d("Something went wrong. Please try again.")}))}),[]),s?r.a.createElement("div",null,s):r.a.createElement("div",null,a?r.a.createElement("div",{className:L.a["empty-page"]},"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(y,{backdropImages:S})),r.a.createElement("div",{className:L.a["thumbstrip-container"]},r.a.createElement("h2",null,"Favourites"),F.length?r.a.createElement(P,{movies:F,onThumbnailClick:G}):r.a.createElement("div",{className:L.a["empty-thumbstrip"]},r.a.createElement("span",null,"Nothing here. Click on a movie to add to favourites."))),g.map((function(e,t){return r.a.createElement("div",{key:t,className:L.a["thumbstrip-container"]},r.a.createElement("h2",null,e.name),w[e.id]?r.a.createElement(P,{movies:w[e.id],onThumbnailClick:G}):r.a.createElement("div",{className:L.a["empty-thumbstrip"]},r.a.createElement("span",null,"Loading...")))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){e.exports={header:"App_header__3ZZ1n","thumbstrip-container":"App_thumbstrip-container__34Wfx","empty-page":"App_empty-page__E5y3a","empty-thumbstrip":"App_empty-thumbstrip__1Uosu"}}},[[21,1,2]]]);
//# sourceMappingURL=main.46fc9dc1.chunk.js.map